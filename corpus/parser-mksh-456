foo | while read a; do b; done